<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>価格比較</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 1rem;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    h1 {
      text-align: left;
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .divider {
      border: none;
      border-top: 1px solid #000;
      margin: 8px 0;
    }

    .product {
      padding: 0.5rem 0;
    }

    .input-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .input-row input {
      width: 80px;
      padding: 4px;
      font-size: 1rem;
    }

    .result {
      display: flex;
      align-items: center;
      margin-top: 0.25rem;
      font-weight: bold;
      color: #000;
    }

    .triangle {
      color: rgb(0, 200, 0); /* ▶の色：緑 */
      margin-right: 0.25rem;
    }

    .highlight {
      background-color: rgb(255, 230, 0);
      padding: 0.5rem;
      font-weight: bold;
    }

    .recommend {
      background-color: rgb(0, 100, 0); /* 深緑 */
      color: white;
      padding: 0.5rem;
      font-weight: bold;
      margin-top: 0.5rem;
    }

    .buttons {
      display: flex;
      gap: 1rem;
      margin-top: 0.5rem;
    }

    .button {
      background-color: rgb(0, 200, 0); /* 緑色 */
      color: white;
      padding: 0.4rem 1rem;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }

    .left-align {
      text-align: left;
    }

    @media (max-width: 600px) {
      .divider {
        display: none;
      }

      .result {
        justify-content: flex-start;
      }

      .input-row {
        flex-direction: row;
      }

      .input-row input {
        width: 60px;
      }

      .buttons {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <h1>価格比較</h1>
  <hr class="divider" />
  
  <div class="product" id="productA">
    <div class="left-align">商品A：</div>
    <hr class="divider" />
    <div class="input-row">
      <input type="number" id="weightA" placeholder="重さ" /> g
      <input type="number" id="priceA" placeholder="価格" /> 円
    </div>
    <div class="result"><span class="triangle">▶</span><span id="unitPriceA">-- 円/g</span></div>
  </div>

  <div class="product" id="productB">
    <div class="left-align">商品B：</div>
    <hr class="divider" />
    <div class="input-row">
      <input type="number" id="weightB" placeholder="重さ" /> g
      <input type="number" id="priceB" placeholder="価格" /> 円
    </div>
    <div class="result"><span class="triangle">▶</span><span id="unitPriceB">-- 円/g</span></div>
  </div>

  <hr class="divider" />

  <div id="resultBanner" class="highlight left-align">どちらがお得か計算中...</div>
  <button class="button" onclick="resetFields()">リセット</button>

  <script>
    function calculate() {
      const wA = parseFloat(document.getElementById("weightA").value);
      const pA = parseFloat(document.getElementById("priceA").value);
      const wB = parseFloat(document.getElementById("weightB").value);
      const pB = parseFloat(document.getElementById("priceB").value);

      const pricePerGA = wA && pA ? pA / wA : null;
      const pricePerGB = wB && pB ? pB / wB : null;

      const unitPriceAEl = document.getElementById("unitPriceA");
      const unitPriceBEl = document.getElementById("unitPriceB");
      const resultBanner = document.getElementById("resultBanner");

      if (pricePerGA !== null) {
        unitPriceAEl.textContent = pricePerGA.toFixed(2) + " 円/g";
      } else {
        unitPriceAEl.textContent = "-- 円/g";
      }

      if (pricePerGB !== null) {
        unitPriceBEl.textContent = pricePerGB.toFixed(2) + " 円/g";
      } else {
        unitPriceBEl.textContent = "-- 円/g";
      }

      // ハイライト除去
      document.getElementById("productA").classList.remove("highlight");
      document.getElementById("productB").classList.remove("highlight");

      if (pricePerGA && pricePerGB) {
        if (pricePerGA < pricePerGB) {
          resultBanner.textContent = "商品Aのほうがお得！";
          resultBanner.className = "recommend left-align";
          document.getElementById("productA").classList.add("highlight");
        } else if (pricePerGB < pricePerGA) {
          resultBanner.textContent = "商品Bのほうがお得！";
          resultBanner.className = "recommend left-align";
          document.getElementById("productB").classList.add("highlight");
        } else {
          resultBanner.textContent = "どちらも同じ価格です！";
          resultBanner.className = "highlight left-align";
        }
      }
    }

    function resetFields() {
      document.getElementById("weightA").value = "";
      document.getElementById("priceA").value = "";
      document.getElementById("weightB").value = "";
      document.getElementById("priceB").value = "";
      document.getElementById("unitPriceA").textContent = "-- 円/g";
      document.getElementById("unitPriceB").textContent = "-- 円/g";
      document.getElementById("resultBanner").textContent = "どちらがお得か計算中...";
      document.getElementById("resultBanner").className = "highlight left-align";
      document.getElementById("productA").classList.remove("highlight");
      document.getElementById("productB").classList.remove("highlight");
    }

    document.querySelectorAll("input").forEach((input) => {
      input.addEventListener("input", calculate);
    });
  </script>
</body>
</html>
